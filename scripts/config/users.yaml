# =============================================================================
# scripts/config/users.yaml
# ユーザー定義
# =============================================================================
#
# テストデータ生成で使用するユーザーを定義します。
# ユーザーは役割や活動パターンに基づいてカテゴリ分けされています。
#
# -----------------------------------------------------------------------------
# ユーザーカテゴリ概要
# -----------------------------------------------------------------------------
#   カテゴリ           | 人数 | 用途
#   -------------------|------|----------------------------------------
#   admin_users        |   3  | 組織管理者（権限変更、セキュリティ操作）
#   regular_users      | 100  | 通常の開発者（日常的な開発活動）
#   bot_users          |   3  | 自動化アカウント（CI/CD、依存関係更新）
#   suspicious_user    |   1  | 異常検知テスト用（不審なアクセスパターン）
#   low_activity_users |  30  | 低活動ユーザー（休眠分析用）
#   dormant_users      |  20  | 休眠ユーザー（完全に活動停止）
#   former_users       |  50  | 退職者（組織から離脱済み）
#   -------------------|------|----------------------------------------
#   合計               | 207  |
#
# -----------------------------------------------------------------------------
# 共通フィールド説明
# -----------------------------------------------------------------------------
#   name:     ユーザー名（GitHub login）
#   id:       ユーザーID（GitHub APIの数値ID）
#   ip_pool:  アクセス元IPアドレスのリスト（監査ログのactor_ipで使用）

# =============================================================================
# 管理者ユーザー (Admin Users) - 3名
# =============================================================================
# 組織の管理権限を持つユーザー。
# 危険なアクション（リポジトリ削除、メンバー管理等）の実行者として使用されます。
# 深夜作業のシナリオでも使用されます（管理者は緊急対応で深夜作業することがある）。
admin_users:
  - name: "admin-user"          # 一般管理者
    id: 1001
    ip_pool: ["10.0.1.1", "10.0.1.2"]  # 複数IP = オフィスと自宅等

  - name: "security-admin"      # セキュリティ管理者
    id: 1002
    ip_pool: ["10.0.2.1", "192.168.1.100"]

  - name: "org-owner"           # 組織オーナー
    id: 1003
    ip_pool: ["10.0.3.1"]

# =============================================================================
# 通常ユーザー (Regular Users) - 100名
# =============================================================================
# 日常的な開発活動を行う一般的な開発者。
# パターンベースで一括生成されます。
#
# パラメータ:
#   pattern:       ユーザー名のフォーマット文字列
#                  {id:03d} = 3桁ゼロ埋め連番（例: dev-001, dev-002, ...）
#   start_id:      連番の開始値
#   end_id:        連番の終了値（この値を含む）
#   user_id_start: GitHub APIユーザーIDの開始値
#   ip_prefix:     IPアドレスのプレフィックス（10.10.X.Y形式で生成）
regular_users:
  pattern: "dev-{id:03d}"       # dev-001 〜 dev-100
  start_id: 1
  end_id: 100
  user_id_start: 2001           # ユーザーID 2001〜2100
  ip_prefix: "10.10"            # IP: 10.10.0.1 〜 10.10.0.100

# =============================================================================
# ボットユーザー (Bot Users) - 3名
# =============================================================================
# 自動化ツールのアカウント。
# 名前が "[bot]" で終わるのが特徴です。
# 週末や深夜でも活動するのが正常（自動化のため）。
bot_users:
  - name: "dependabot[bot]"      # 依存関係自動更新（GitHub公式）
    id: 9001
    ip_pool: ["140.82.112.1"]    # GitHubのIPレンジ

  - name: "github-actions[bot]"  # GitHub Actions実行用
    id: 9002
    ip_pool: ["140.82.112.2"]

  - name: "renovate[bot]"        # 依存関係自動更新（サードパーティ）
    id: 9003
    ip_pool: ["140.82.112.3"]

# =============================================================================
# 不審なユーザー (Suspicious User) - 1名
# =============================================================================
# 異常検知のテスト用ユーザー。
# 不審な国からのアクセス、深夜の活動、危険なアクションと組み合わせて使用されます。
# 実際の攻撃者や内部不正を模倣します。
suspicious_user:
  name: "suspicious-user"
  id: 3001
  ip_pool: ["203.0.113.1", "198.51.100.1"]  # RFC 5737のドキュメント用IPを使用

# =============================================================================
# 低活動ユーザー (Low Activity Users) - 30名
# =============================================================================
# 活動量が少ないユーザー。休眠ユーザー分析のテストに使用します。
#
# パターンによる自動生成:
#   2 periods × 3 event counts × 5 copilot states = 30ユーザー
#
# 命名規則: low-{period}-e{events:03d}-c{copilot}
#   例: low-1m-e005-cnone = 1ヶ月間で5イベント、Copilotなし
#
# パラメータ:
#   user_id_start: ユーザーIDの開始値
#   ip_prefix:     IPアドレスのプレフィックス
#   patterns:      生成パターンのリスト
#     period:         活動期間 ("1m"=1ヶ月, "3m"=3ヶ月)
#     events:         期間中のイベント数リスト
#     copilot_states: Copilot使用状況リスト
#                     "none"=未割当, "1m"/"3m"/"6m"=N月前に最終使用, "null"=未使用
low_activity_users:
  user_id_start: 4001           # ユーザーID 4001〜4030
  ip_prefix: "10.40"            # IP: 10.40.0.1 〜 10.40.0.30
  patterns:
    # 1ヶ月間の低活動パターン
    - period: "1m"              # 直近1ヶ月
      events: [5, 10, 50]       # 5, 10, 50イベント/月
      copilot_states: ["none", "1m", "3m", "6m", "null"]

    # 3ヶ月間の低活動パターン
    - period: "3m"              # 直近3ヶ月
      events: [5, 10, 50]       # 5, 10, 50イベント/期間
      copilot_states: ["none", "1m", "3m", "6m", "null"]

# =============================================================================
# 休眠ユーザー (Dormant Users) - 20名
# =============================================================================
# 長期間活動がないユーザー。休眠ユーザー分析の主要なテスト対象です。
#
# パターンによる自動生成:
#   (3 activity levels + 1 invite-only) × 5 copilot states = 20ユーザー
#
# 命名規則: dormant-a{activity}-c{copilot}
#   例: dormant-a100-c3m = 過去に100イベント、Copilot3ヶ月前に最終使用
#   例: dormant-ainv-cnone = 招待のみで活動なし、Copilotなし
#
# パラメータ:
#   user_id_start: ユーザーIDの開始値
#   ip_prefix:     IPアドレスのプレフィックス
#   patterns:      生成パターンのリスト
#     type: "activity"      - 過去に活動があったが現在休眠
#       historical_events:  過去のイベント総数リスト（10, 100, 1000）
#     type: "invite_only"   - 招待されたが一度も活動していない
#     copilot_states:       Copilot使用状況リスト
dormant_users:
  user_id_start: 5001           # ユーザーID 5001〜5020
  ip_prefix: "10.50"            # IP: 10.50.0.1 〜 10.50.0.20
  patterns:
    # 過去の活動履歴があるパターン
    - type: "activity"
      historical_events: [10, 100, 1000]  # 低・中・高活動の3パターン
      copilot_states: ["none", "1m", "3m", "6m", "null"]

    # 招待のみで一度も活動していないパターン
    - type: "invite_only"
      copilot_states: ["none", "1m", "3m", "6m", "null"]

# =============================================================================
# 退職者ユーザー (Former Users) - 50名
# =============================================================================
# 組織から離脱したユーザー。
# 監査ログには記録が残っているが、現在のメンバーリストには含まれません。
# Copilotライセンスの無駄遣い検出などに使用されます。
#
# パターンによる自動生成:
#   3 exit times × 3 event frequencies × 4 copilot states = 36ユーザー
#   + 14 ランダムユーザー = 50ユーザー
#
# 命名規則: former-x{exit}m-e{events:03d}-c{copilot}
#   例: former-x1m-e025-cp1m = 1ヶ月前に退職、月25イベント、Copilot退職1ヶ月前まで使用
#
# パラメータ:
#   user_id_start: ユーザーIDの開始値
#   ip_prefix:     IPアドレスのプレフィックス
#   patterns:      生成パターン
#     exit_months:      退職時期（何ヶ月前に退職したか）
#     events_per_month: 在籍中の月間イベント数
#     copilot_states:   Copilot使用状況
#                       "none"=未割当, "pre-Nm"=退職N月前まで使用, "unused"=割当されたが未使用
#   random_users:  追加のランダムユーザー
#     count:        生成数
#     name_pattern: 名前のフォーマット
former_users:
  user_id_start: 6001           # ユーザーID 6001〜6050
  ip_prefix: "10.60"            # IP: 10.60.0.1 〜 10.60.0.50

  # 系統的なパターン（36ユーザー）
  patterns:
    exit_months: [1, 3, 6]              # 1, 3, 6ヶ月前に退職
    events_per_month: [5, 25, 100]      # 低・中・高活動
    copilot_states: ["none", "pre-1m", "pre-3m", "unused"]

  # ランダムパターン（14ユーザー）
  # より多様なパターンを追加するため
  random_users:
    count: 14
    name_pattern: "former-rand-{id:03d}"  # former-rand-001 〜 former-rand-014
